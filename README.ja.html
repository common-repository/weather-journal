<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Weather Journal 説明書</title>
<style type="text/css">
h1 {text-align:center;}
h2 {color:white; background: maroon;}
h3 {width:50%; color: white; background: maroon;}
h3 a {color:lightblue;}
h4 {width:33%; border-bottom:dotted 1px maroon;}
dt {font-weight:bold;}
dd {margin-bottom:0.5em;}
li {line-height:1.5em;}
.navi {text-align:center;}
table {border-top:1px solid black;border-left:1px solid black;border-collapse:collapse}
table th {border:0 none;border-right: solid 1px black;border-bottom: solid 1px black;}
table td {border:0 none;border-right: solid 1px black;border-bottom: solid 1px black; text-align:center}
td.feature {text-align:left;}</style>
</head>
<body>
<h1>Weather Journal マニュアル</h1>

<h2>はじめに</h2>

<p>プラグイン配布サイト: <a href="http://wppluginsj.sourceforge.jp/weather_journal/">http://wppluginsj.sourceforge.jp/weather_journal/</a></p>

<p>※以前からのユーザーさんは、少なくとも「↓<a href="#upgrade">以前のバージョンからの更新方法</a>」と「↓<a href="#history">改版履歴</a>」には目を通しておいてください。</p>

<h3 id="abstract">概要</h3>
<p> Weather Journal は、日々のお天気を WordPress ウェブログで記録し、表示させるプラグインです。お天気の設定は執筆者が手動で行うため、天気予報が外れても正しい天気が記録できますし、古い記事でも天気が設定可能です。</p>

<h3 id="requirements">対応環境</h3>
<ul>
  <li>WordPress 2.2 以降。2.9 にも対応しています。2.0, 2.1 系統ではテストしていませんが、UTF-8 なウェブログなら動くかもしれません (言語リソースのファイル名の変更が必要です)。</li>
  <li>PHP 5 以降。ただし、動作確認は PHP 5.2.x, 5.3.x で行なっていますので、PHP 5.0, 5.1 系統の場合は自己責任でお願いいたします。PHP 4 への対応予定はありません。</li>
</ul>

<h3 id="installation">設置方法</h3>
<ol>
  <li>配布ファイルを展開し、weather_journal フォルダーごとサーバーのプラグインディレクトリー (wp-content/plugins/) に転送します。<br />
  ただし、本 README ファイル、LICENSE ファイルおよび lang/weather_journal-ja.po ファイルは転送しなくても問題ありません。</li>
  <li>プラグインを有効にすると、自動的にデータベースにお天気記録用テーブルが作成されます。</li>
  <li>テーマエディタで、スタイルシート (style.css) の末尾に以下の1行を追加します。(先頭のドットを忘れないように!!) なお、好みに応じて記述内容を変更しても構いません。
  <pre>.weather {text-align:right; margin-right:8px;}</pre></li>
</ol>
<p>以上で完了です。WordPress 2.3 以降を使っている場合、本プラグインの更新を知らせるために、別途「<a href="http://wppluginsj.sourceforge.jp/jseries-notifier/">JSeries Notifier</a>」をインストールされることをおすすめします。</p>

<h3 id="multiple">複数 WordPress での兼用</h3>
<p>複数の WordPress でお天気を共用したい場合は以下のようにしてください。</p>
<ul>
  <li>すべての WordPress インストールは同一のデータベースに対して行なってください。データベースをまたがっての共用はできません。必然的に、それぞれの WordPress でデータベース接頭辞 (wp_ など) を変える必要があります。</li>
  <li>お天気を格納する WordPress ウェブログを1つ決めます。</li>
  <li>他の WordPress ウェブログの wp-config.php に対し、お天気を格納する WordPress が使うデータベース接頭辞を以下のようにして指定します。
  <pre>define('WEATHER_JOURNAL_DB_PREFIX', 'wp_');</pre></li>
</ul>

<h3 id="upgrade">以前のバージョンからの更新方法</h3>
<ul>
  <li>バージョン 1.3.0 からテーブル名を (wp_)ynweather から (wp_)weatherjournal に変更しました。お手数ですが、phpMyAdmin などで変更してください。</li>
  <li>バージョン 1.2.0 で天気アイコンをフォルダーにまとめましたので、サーバー上で weather_journal ディレクトリー直下の png 画像ファイルを全部削除しておいてください。一番簡単なのは、weather_journal ディレクトリーごと削除してから、アップロードし直すことです。</li>
</ul>

<h3 id="purge">プラグインの撤去</h3>
<p>プラグインの使用を中止して、撤去するには以下の手順で行なってください。</p>
<ol>
  <li>プラグインを無効にします。</li>
  <li>FTP ツール等で、サーバーのプラグインディレクトリー (wp-content/plugins/) から weather_journal ディレクトリーを丸ごと削除します。</li>
  <li>phpMyadmin もしくは mysql コマンドラインで、(wp_)weatherjournal テーブルを削除します。</li>
</ol>

<h3 id="usage">使用方法</h3>
<ul>
  <li>記事の投稿・編集時に、右サイドバー下側 (または画面下部) に「この日のお天気」フィールドが表示されます。ここで適当な天気を選んで記事を保存・公開します。</li>
  <li>ウェブログ画面にて、日付の次の行にお天気が表示されます。拙作の <a href="http://wppluginsj.sourceforge.jp/ktai_style/">Ktai Style プラグイン</a>と併用した場合、携帯電話では天気の絵文字で出力します。まおう氏の <a href="http://hrlk.com/script/mobile-eye-plus/">Mobile Eye+</a> の場合、天気を文字列で出力します。</li>
  <li>設定した天気を削除するときは、お天気メニュー最下部にある「-削除する-」を選んでください。「(未設定)」では削除になりません。</li>
  <li>WordPress 標準の wp-mail.php、norida さんの <a href="http://junklog.cocolog-nifty.com/blog/wp_mobg/">MobG</a>、拙作の <a href="http://wppluginsj.sourceforge.jp/ktai_entry/">Ktai Entry</a> 等のメール投稿ツールの場合は、本文に以下のようなコマンドを書くと天気が設定できます。コマンドは文中のどこにでも書けますが、各行の先頭に書く必要があります。コマンドは投稿本文からは削除されます。
<pre>
WEATHER:sun
WEATHER:くもり
</pre>
  コマンドに使える文字列は以下の通りです。晴れは "sun" であること (fine ではない)、くもりは「曇り」ではないことにご注意ください。
  <ul>
    <li>sun,sun+cloud, sun-cloud, sun+rain, sun.rain, sun-rain, sun.thunder, sun-thunder, sun+snow, sun.snow, sun-snow, cloud, cloud+sun, cloud-sun, cloud+rain, cloud.rain, cloud-rain, cloud+thunder, cloud.thunder, cloud-thunder, cloud+snow, cloud.snow, cloud-snow, cloud+snow_thunder, fog, rain, storm, thunder, rain+sun, rain-sun, rain+cloud, rain-cloud, rain.sleet, rain+snow, rain.snow, rain-snow, snow, snowfall, snow+sun, snow-sun, snow+cloud, snow-cloud, snow+rain, snow.rain, snow-rain, snow.sleet, snow-sleet, snow_thunder</li>
    <li>晴れ, 晴れ時々くもり, 晴れのちくもり, 晴れ時々雨, 晴れ一時雨, 晴のち雨, 晴れ一時雷雨, 晴れのち雷雨, 晴れ時々雪, 晴れ一時雪, 晴のち雪, くもり, くもり時々晴れ, くもりのち晴れ, くもり時々雨, くもり一時雨, くもりのち雨, くもり時々雨で雷, くもり一時雷雨, くもりのち雷雨, くもり時々雪, くもり一時雪, くもりのち雪, くもり時々雪で雷, 霧, 雨, 大雨・台風, 雷雨, 雨時々晴れ, 雨のち晴れ, 雨時々止む, 雨のちくもり, 雨一時みぞれ, 雨時々雪, 雨一時雪, 雨のち雪, 雪, 大雪・吹雪, 雪時々晴れ, 雪のち晴れ, 雪時々止む, 雪のちくもり, 雪時々雨, 雪一時雨, 雪のち雨, 雪一時みぞれ, 雪のちみぞれ, 雪で雷を伴う</li>
  </ul></li>  
</ul>

<h3 id="terms">用語説明</h3>

<p>「一時」「時々」「のち」の使い分けは、日本の気象庁においては次のような定義となっています。ただし、この定義に厳密に従う必要はありませんので、適当に選んでもらって構いません。</p>

<ul>
  <li>○○一時□□……主に○○という現象で、1/4 未満の時間は□□という現象が発生。</li>
  <li>○○時々□□……主に○○という現象で、1/2 未満の時間は□□という現象が発生。</li>
  <li>○○のち□□……1日の前半と後半で現象が異なる。</li>
  <li>○○時々止む……聞き慣れない言葉ですが正式な気象用語です。「雨時々くもり」だと「くもり時々雨」と区別しにくいため、「時々止む」と表現されます。</li>
</ul>

<h3 id="restrictions">制限事項</h3>

<ul>
  <li>このプラグインは <code>the_date()</code> 関数にフックします。あなたの使用しているテーマが <code>the_date()</code> テンプレートタグを使っていない場合、お天気は表示されません。</li>
  <li>天気名称は日本の気象庁の用語に基いており、日本語リソースファイルを外したときの英語天気名は適当に翻訳したものです。海外での天気予報の用語とは必ずしも一致しません。</li>
  <li>天気の記録は1日1つです。記事ごとではありません。したがって、突発的な気象現象 (竜巻) などは対応していません。</li>
  <li>実際の天気を記録することが目的で、天気予報を載せるものではないため、天気の選択肢に「または」はありません。「一時」や「時々」を使ってください。</li>
  <li>同じ日に別途投稿を行うと、「この日のお天気」フィールドには設定ずみの天気が表示されます。天気を変更すると、その日のお天気が修正され、同じ日の他の投稿に影響します。</li>
  <li>記事の投稿日付を変更した場合、新しい日付にて同じ天気が設定されます。また、元の日付の天気はデータベースにそのまま残ります。</li>
  <li>メールでの天気設定において、メール投稿ツールとして MobG を使用しているとき、画像を添付した場合は、天気設定コマンド (WEATHER:) がうまく削除されません。</li>
</ul>

<h3 id="difference-to-wpotenki"><a href="http://wppluginsj.sourceforge.jp/wp-otenki/">wp-otenki</a> との相違点</h3>

<ul>
  <li>お天気の設定は手動です。ヨソのサーバーから気象情報を取得することはありません。</li>
  <li>記事の修正時にお天気を変更することや、どんな古い記事でも天気を設定することが可能です。</li>
  <li>地域設定など初期設定は不要です。</li>
  <li>お天気の記録は1日1つです。記事ごとに設定はできません。</li>
</ul>

<h2 id="history">改版履歴</h2>

<dl>
<dt id="ver130">ver 1.3.0 (2010-01-05)</dt>
<dd><ul>
  <li>WordPress 公式プラグインディレクトリーで配布するようにしました。</li>
  <li>WordPress 2.7 以降において、プラグイン管理パネルで説明がローカライズされるようにしました。</li>
  <li>WordPress 2.6 以降において、Ktai Location など他のプラグインに悪影響が出ないように対応しました。</li>
  <li>MySQL 4.1 以降において、お天気テーブルが生成されないことがある不具合を修正しました。</li>
</ul></dd>
<dt id="ver120">ver 1.2.0 (2009-01-15)</dt>
<dd><ul>
  <li>メール投稿でも天気を設定できるようにしました。Ktai Entry を使う場合、バージョン 0.8.9 以降が必要です。</li>
  <li>設定された天気を削除できるようにしました。</li>
  <li>WordPress 2.6以降に対応しました。wp-config.php および wp-content の移動が可能です。WordPress 2.7 では「表示オプション」で表示／非表示を切り替えできます。</li>
  <li>定数 WEATHER_JOURNAL_DB_PREFIX が設定されている場合、DB の接頭辞としてそれを使うようにしました。複数の WordPress サイトでお天気を共有することができます。</li>
  <li>WordPress 2.6 以降で、天気を未設定のままにしても、直前に設定した別の日の天気が設定されてしまうことがある不具合を修正しました。</li>
  <li>MobilePress, MobilePressNEO と併用したときも、日付の横に天気を文字列で表示するようにしました。</li>
  <li>Mobile Eye+ を併用したとき、PHP エラーが発生してしまう不具合を修正しました。</li>
  <li>天気アイコンを pics フォルダー／ディレクトリー配下にまとめました。</li>
</ul></dd>
<dt id="ver113">ver 1.1.3 (2008-04-10)</dt>
<dd><ul>
  <li>スマートフォン等の「その他」端末で天気表示がされない不具合を修正しました。</li>
  <li>WordPress 2.5 において、投稿画面デザイン変更に追随しました。</li>
</ul></dd>
<dt id="ver112">ver 1.1.2 (2007-12-27)</dt>
<dd><ul>
  <li>Ktai Style プラグイン ver 0.98 に対応しました。バージョン 1.1.1 以前は、Ktai Style 0.98 に対応しておらず、携帯電話で閲覧すると表示が途切れてしまいます。</li>
</ul></dd>
<dt id="ver120">ver 1.2.0 (2009-01-15)</dt>
<dd><ul>
  <li>メール投稿でも天気を設定できるようにしました。Ktai Entry を使う場合、バージョン 0.8.9 以降が必要です。</li>
  <li>設定された天気を削除できるようにしました。</li>
  <li>WordPress 2.6以降に対応しました。wp-config.php および wp-content の移動が可能です。WordPress 2.7 では「表示オプション」で表示／非表示を切り替えできます。</li>
  <li>定数 WEATHER_JOURNAL_DB_PREFIX が設定されている場合、DB の接頭辞としてそれを使うようにしました。複数の WordPress サイトでお天気を共有することができます。</li>
  <li>WordPress 2.6 以降で、天気を未設定のままにしても、直前に設定した別の日の天気が設定されてしまうことがある不具合を修正しました。</li>
  <li>MobilePress, MobilePressNEO と併用したときも、日付の横に天気を文字列で表示するようにしました。</li>
  <li>Mobile Eye+ を併用したとき、PHP エラーが発生してしまう不具合を修正しました。</li>
  <li>天気アイコンを pics フォルダー／ディレクトリー配下にまとめました。</li>
</ul></dd>
<dt id="ver113">ver 1.1.3 (2008-04-10)</dt>
<dd><ul>
  <li>スマートフォン等の「その他」端末で天気表示がされない不具合を修正しました。</li>
  <li>WordPress 2.5 において、投稿画面デザイン変更に追随しました。</li>
</ul></dd>
<dt id="ver112">ver 1.1.2 (2007-12-27)</dt>
<dd><ul>
  <li>Ktai Style プラグイン ver 0.98 に対応しました。バージョン 1.1.1 以前は、Ktai Style 0.98 に対応しておらず、携帯電話で閲覧すると表示が途切れてしまいます。</li>
</ul></dd>
<dt id="ver111">ver 1.1.1 (2007-12-16)</dt>
<dd><ul>
  <li><a href="http://wphoneplugin.org/">WPhone プラグイン</a>と Ktai Style プラグインを併用している場合、SoftBank PDC 端末で天気が携帯絵文字にならない不具合を修正しました。</li>
</ul></dd>
<dt id="ver110">ver 1.1.0 (2007-10-22)</dt>
<dd><ul>
  <li>拙作の Ktai Style プラグインと併用した場合、携帯電話出力では天気の絵文字で出力するようにしました。まおう氏の Mobile Eye+ と併用した場合は、天気をテキスト出力するようにしました。</li>
</ul></dd>
<dt id="ver100">ver 1.0.0 (2007-08-11)</dt>
<dd><ul>
  <li>新規リリース。</li>
</ul></dd>
</dl>

</body>
</html>